
// Color Alpha Primary    -----------------------------------------------------------

let alphaColor = window.getComputedStyle(document.documentElement).getPropertyValue('--PrimaryColor');
alphaColor = alphaColor.trim();
alphaColor = alphaColor+'9C';
document.documentElement.style.setProperty('--color_primary_alpha', alphaColor);


// Function for NavBar --------------------------------------------------------------

function toggleNavBar() {
  document.getElementById("app-nav-wrap-id").classList.toggle('toggled');
}
document.querySelector(".app-nav-toggle").addEventListener("click", toggleNavBar);



// Function for NavBarSuubMenu ------------------------------------------------------------

const subMenus = document.querySelectorAll(".app-nav-submenu");
for (const subMenu of subMenus) {
  const subMenuTitle = subMenu.getElementsByClassName("app-nav-submenu-title")[0];
  const subMenuContent = subMenu.getElementsByClassName("app-nav-submenu-content")[0];

  subMenuTitle.onclick = function() {
    subMenuContent.classList.toggle("show");
  };
};


// Function for Accordion ------------------------------------------------------------

const Accordions = document.querySelectorAll(".app-accordion-item");
for (const Accordion of Accordions) {
  const accordionTitle = Accordion.getElementsByClassName("app-accordion-title")[0];
  const accordionContent = Accordion.getElementsByClassName("app-accordion-content")[0];
  
  accordionTitle.onclick = function() {
    accordionContent.classList.toggle("show");
  };
};


// Function for Alert ------------------------------------------------------------

const AlertTriggers = document.querySelectorAll('[data-toggle="modal"]');

for (const AlertTrigger of AlertTriggers) {
 const getAlertID = AlertTrigger.getAttribute("data-target");

  AlertTrigger.onclick = function(e) {
    
    if (e.target !== this && AlertTrigger.classList.contains("app-alert"))
    return;
    
    document.getElementById(getAlertID).classList.toggle("show");
  };
};



// Function for SliderBar ------------------------------------------------------------

const settings = {
  fill: 'var(--PrimaryColor)',
  background: '#999999'   
}
// First find all our sliders
const sliders = document.querySelectorAll('.app-range-slider');

for (const slider of sliders) {
  slider.querySelector('input').addEventListener('input', (event) => {
    if(slider.querySelector('span')) {
      slider.querySelector('span').innerHTML = event.target.value;
    }
    applyFill(event.target);
  });
  applyFill(slider.querySelector('input'));
};

// This function applies the fill to our sliders by using a linear gradient background
function applyFill(slider) {
  const percentage = 100*(slider.value-slider.min)/(slider.max-slider.min);
  const bg = `linear-gradient(90deg, ${settings.fill} ${percentage}%, ${settings.background} ${percentage+0.1}%)`;
  slider.style.background = bg;
}


// Function for LoaderBusy ------------------------------------------------------------

const LoaderBusyBody = '<div class="w-ball-wrapper ball-1"><div class="w-ball"></div></div>'
                      +'<div class="w-ball-wrapper ball-2"><div class="w-ball"></div></div>'
                      +'<div class="w-ball-wrapper ball-3"><div class="w-ball"></div></div>'
                      +'<div class="w-ball-wrapper ball-4"><div class="w-ball"></div></div>'
                      +'<div class="w-ball-wrapper ball-5"><div class=" w-ball"></div></div>';

const loaderbusys = document.querySelectorAll('.app-loader-busy');
for (const loaderbusy of loaderbusys) {
  loaderbusy.innerHTML = LoaderBusyBody;
};


// Function for InputPassword ------------------------------------------------------------

const inputTexts = document.querySelectorAll('.app-input-container');
for (const inputText of inputTexts) {
  const inputField = inputText.getElementsByTagName("input")[0];
  const unMaskButton = inputText.getElementsByTagName("button");

  if(unMaskButton.length!==0) {
    unMaskButton[0].onclick = function() {
      if(inputField.type === "password") {
        inputField.type = "text";
      }
      else {
        inputField.type = "password";
      }
    };
  }
};


